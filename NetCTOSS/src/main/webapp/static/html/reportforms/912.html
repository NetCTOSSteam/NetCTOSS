<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="../../js/jquery-3.3.1.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../js/jquery.json-2.4.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../easyui/jquery.easyui.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../js/easyui.demo.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../easyui/locale/easyui-lang-zh_CN.js"></script>
    <script type="text/javascript" src="../../echarts/echarts.js" charset="utf-8"></script>

    <link rel="stylesheet" type="text/css" href="../../easyui/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="../../easyui/themes/icon.css">
</head>
<body class="easyui-layout" >
<div id="tb">
	<br/>
	 账务账号: 
	<input id="userAccount" class="easyui-combobox" data-options="    
        valueField: 'id',    
        textField: 'loginName',
        method : 'get' ,   
        url:'/NetCTOSS/user/findAll',    
        onSelect: function(rec){    
            var url = '/NetCTOSS/user/findYearByAccountName?AccountName='+rec.loginName; 
            method = 'get';
            $('#year').combobox({
            	 method : 'get' ,   
       			 url:url
            });    
        }" />
          请选择年份:    
	<input id="year" class="easyui-combobox" data-options="valueField:'id',textField:'year'" />  
	
    <a id="query" href="javascript:void(0)" class="easyui-linkbutton"
       data-options="iconCls:'icon-search'">查询</a>
</div>
<div id="main" style="width: 80%;height:400px" >
    
</div>
<script>

    $(function(){
    	$('#userAccount').combobox('select', '1'); //设置下拉框默认选中第一条数据
    	$('#year').combobox('select', '1');
    	
    	
    	var myChart = echarts.init(document.getElementById('main'));
    	
    	$.ajax({
    		   type: "GET",
    		   url: "",
    		   success: function(msg){
    			   
    			   
    			// 显示标题，图例和空的坐标轴
    		        myChart.setOption({
    		            title : {
    		                text: '对应账务账号在该年每月的数据',
    		                subtext: '',
    		                x:'center'
    		            },
    		            tooltip : {
    		                trigger: 'item'
//    		                formatter: "{a} <br/>{b} : {c} ({d}%)"
    		            },
    		            legend: {
    		                orient: 'vertical',
    		                left: 'left',
    		                data: ['直接访问','邮件营销','联盟广告','视频广告','搜索引擎']
    		            },
    		            series : [
    		                {
    		                    name: '月数据',
    		                    type: 'pie',
    		                    radius : '55%',
    		                    center: ['50%', '60%'],
    		                    data:[
    		                        {value:335, name:'直接访问'},
    		                        {value:310, name:'邮件营销'},
    		                        {value:234, name:'联盟广告'},
    		                        {value:135, name:'视频广告'},
    		                        {value:1548, name:'搜索引擎'}
    		                    ],
    		                    itemStyle: {
    		                        emphasis: {
    		                            shadowBlur: 10,
    		                            shadowOffsetX: 0,
    		                            shadowColor: 'rgba(0, 0, 0, 0.5)'
    		                        }
    		                    }
    		                }
    		            ]
    		        });
    		    });
    			   
    			   
    			   
    			   
    			   
    		   }
    		});
    	
        
    
</script>
</body>
</html>